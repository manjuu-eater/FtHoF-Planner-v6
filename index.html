<!DOCTYPE html>
<html lang="en-US" xmlns="http://www.w3.org/1999/html">
<head>
    <!-- Angular Material requires Angular.js Libraries -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular-animate.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular-aria.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular-messages.min.js"></script>
    <!-- Angular Material Library -->
    <script src="https://ajax.googleapis.com/ajax/libs/angular_material/1.1.8/angular-material.min.js"></script>

    <script src="./lib/seedrandom.min.js"></script>
    <script src="./lib/base64.js"></script>
    <script type="module" src="index.js"></script>

    <link rel="shortcut icon" type="image/x-icon" href="img/favicon.ico?">
    <link rel="stylesheet" type="text/css" href="index.css">
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/angular_material/1.1.8/angular-material.min.css">


    <title>FtHoF Planner v6</title>
</head>
<body>
<md-toolbar>
    <div class="md-toolbar-tools">
        <h1>
            <span>Cookie Clicker FtHoF Planner v6</span>
        </h1>
    </div>
</md-toolbar>
<div ng-app="myApp" ng-controller="myCtrl">
    <div class="content">
        <div layout="row">
            <md-input-container flex>
                <label>Save Code</label>
                <input onClick="this.select();" ng-model="save_string" style="color: grey;">
            </md-input-container>
            <md-button class="md-raised md-primary" ng-click="load_game()">Import Save</md-button>
        </div>

        <p><b>
            Based on FtHoF planner v1, v2, v3, v4, v5 by RebelKeithy, Skeezy, Eminenti, Mylaaan and Joseph3079.
            Huge thanks to them for creating such a helpful tool.<br>
            ◆ <a href="./version_history.html">full version history, credits & contacts</a>
        </b></p>
        <p><b>
            The current version is compatible with cookie clicker 2.052, "often imitated, never duplicated".
        </b></p>

        <p>
            RebelKeithy, Skeezy, Mylaaan, & Joseph3079 made a guide explaining the options/features we added.<br>
            <b>◆ <a href="./user_guide.html">User Guide</a></b>
        </p>

        <md-divider></md-divider>

        <ul ng-if="combos">
            <li class="combo-listitem" ng-repeat="combo in combos">
                <b>{{$index + min_combo_length}}x Combo</b>
                <ul ng-if="combo.shortest.idx == -1">
                    <li>No combo of this length</li>
                </ul>
                <ul ng-if="combo.shortest.idx != -1">
                    <li ng-if="combo.first.idx != -1">
                        <a href="#{{combo.first.idx + 1}}">Earliest:</a>
                        Length {{combo.first.length}};
                        spread {{combo.first.length - ($index + min_combo_length)}};
                        starting at
                        <a href="#{{combo.first.idx + 1}}">spell #{{combo.first.idx+1}}</a>
                    </li>
                    <li ng-if="combo.first.idx == -1">
                        No combo of this length with spread &lt;= {{max_spread}}
                    </li>
                    <li>
                        <a href="#{{combo.shortest.idx + 1}}">Shortest:</a>
                        Length {{combo.shortest.length}};
                        spread {{combo.shortest.length - ($index + min_combo_length)}};
                        starting at
                        <a href="#{{combo.shortest.idx + 1}}">spell #{{combo.shortest.idx+1}}</a>
                    </li>
                </ul>
            </li>
        </ul>

        <md-divider></md-divider>

        <label>Lookahead length</label>
        <input type="number" ng-model="lookahead" min=10 max=1000>

        <md-divider></md-divider>

        <label>Min Combo</label>
        <input type="number" ng-model="min_combo_length" min=1 max=20>

        <label>Max Combo</label>
        <input type="number" ng-model="max_combo_length" min=1 max=20>

        <label>Max Spread</label>
        <input type="number" ng-model="max_spread" min=0 max=99>

        <md-checkbox ng-checked=true ng-model="include_ef_in_sequence" aria-label="Include Elder Frenzy">
            Include Elder Frenzies
        </md-checkbox>

        <md-checkbox ng-checked=true ng-model="skip_abominations" aria-label="Allow Abomination Skips">
            Skip Abominations
        </md-checkbox>

        <md-checkbox ng-checked=true ng-model="skip_edifices" aria-label="Allow Spontaneous Edifice Skips">
            Skip Spontaneous Edifices
        </md-checkbox>


        <md-divider></md-divider>

        <label>Golden Cookies on screen</label>
        <input type="number" ng-model="on_screen_cookies" min=0 max=10>

        <md-checkbox ng-model="dragonflight" aria-label="Dragonflight Buff Active">
            Dragonflight Buff Active
        </md-checkbox>

        <md-checkbox ng-model="supremeintellect" aria-label="Supreme Intellect Aura Active">
            Supreme Intellect Aura Active
        </md-checkbox>

        <md-checkbox ng-model="diminishineptitude" aria-label="Diminish Ineptitude Active">
            Diminish Ineptitude Active
        </md-checkbox>


        <md-divider></md-divider>

        <md-button class="md-raised md-primary" ng-click="update_cookies()">Apply Settings</md-button>
        <md-button class="md-raised md-primary" ng-click="cast_spell()">Cast Spell</md-button>
        <md-button class="md-raised md-primary" ng-click="cast_spell(5)">x5</md-button>
        <md-button class="md-raised md-primary" ng-click="cast_spell(10)">x10</md-button>
        <!-- <md-button class="md-raised md-primary" ng-click="print_scope()">Print Scope</md-button> -->

        <md-divider></md-divider>


        <div layout-gt-xs="row" layout="column">
            <div flex-gt-xs="15" flex>
                <md-toolbar layout="row" class="md-hue-3">
                    <div class="md-toolbar-tools">
                        <h1>Spell #</h1>
                    </div>
                </md-toolbar>
                <md-content>
                    <md-list flex>
                        <md-subheader class="md-no-sticky">Relative to now (This ascension | All time)</md-subheader>
                        <md-list-item class="md-2-line" ng-repeat="cookie_list in cookies" ng-click="null">
                            <div class="md-list-item-text" layout="column">
                                <a name="{{$index + 1}}"></a>
                                <h3>{{($index+1) + " (" + (spellsCastThisAscension+$index+1) + " | " +
                                    (spellsCastTotal+$index+1) + ")"}}</h3>
                            </div>
                        </md-list-item>
                    </md-list>
                </md-content>
            </div>
            <md-divider></md-divider>
            <div flex-gt-xs="15" flex>
                <md-toolbar layout="row" class="md-hue-3">
                    <div class="md-toolbar-tools">
                        <h1>Random Seed</h1>
                    </div>
                </md-toolbar>
                <md-content>
                    <md-list flex>
                        <md-subheader class="md-no-sticky">Used to determine spell backfires and GFD spells.</md-subheader>
                        <md-list-item class="md-2-line" ng-repeat="cookie_list in cookies" ng-click="null">
                            <div class="md-list-item-text" layout="column">
                                <h3>{{randomSeeds[$index].toFixed(4) + " (" + (randomSeeds[$index]+baseBackfireChance>1 ? 0 : ((1.075-randomSeeds[$index]-baseBackfireChance)/0.15).toFixed(0)) + " GC)"}}</h3>
                            </div>
                        </md-list-item>
                    </md-list>
                </md-content>
            </div>
            <md-divider></md-divider>
            <div flex-gt-xs="30" flex>
                <md-toolbar layout="row" class="md-hue-3">
                    <div class="md-toolbar-tools">
                        <h1>No Change</h1>
                    </div>
                </md-toolbar>
                <md-content>
                    <md-list flex>
                        <md-subheader class="md-no-sticky">Season is not Easter or Valentines.</md-subheader>
                        <md-list-item class="md-2-line" ng-repeat="cookie_list in cookies" ng-click="null">
                            <img ng-src='{{displayCookies[$index][0].wrath?"img/WrathCookie.png":"img/GoldCookie.png"}}'
                                 class="md-avatar" alt="Golden Cookie"/>
                            <div class="md-list-item-text{{displayCookies[$index][0].noteworthy ? ' highlightCombo' : ''}}"
                                 layout="column">
                                <h3>{{displayCookies[$index][0].type}}</h3>
                            </div>
                        </md-list-item>
                    </md-list>
                </md-content>
            </div>
            <md-divider></md-divider>
            <div style="display: block;" id="content-3" flex-gt-xs="30" flex>
                <md-toolbar layout="row" class="md-hue-3">
                    <div class="md-toolbar-tools">
                        <h1>One Change</h1>
                        <div style="flex-grow: 1;"></div>
                        <div class="hide-column">
                            <!--Sadly not possible to look clean with md-checkbox as it doesn't resize.-->
                            <input type="checkbox" id="show" ng-click="collapse_interface(3)" checked=true>
                            <label for="show">Show</label>
                        </div>
                    </div>
                </md-toolbar>
                <md-content>
                    <md-list flex>
                        <md-subheader class="md-no-sticky">Season is Easter or Valentines.</md-subheader>
                        <md-list-item class="md-2-line" ng-repeat="cookie_list in cookies" ng-click="null">
                            <img ng-src='{{displayCookies[$index][1].wrath?"img/WrathCookie.png":"img/GoldCookie.png"}}'
                                 class="md-avatar" alt="Golden Cookie"/>
                            <div class="md-list-item-text{{displayCookies[$index][1].noteworthy ? ' highlightCombo' : ''}}"
                                 layout="column">
                                <h3>{{displayCookies[$index][1].type}}</h3>
                            </div>
                        </md-list-item>
                    </md-list>
                </md-content>
            </div>
            <md-divider></md-divider>
            <div flex-gt-xs="30" flex>
                <md-toolbar layout="row" class="md-hue-3">
                    <div class="md-toolbar-tools">
                        <span>Gambler's Dream</span>
                    </div>
                </md-toolbar>
                <md-content>
                    <md-list flex>
                        <md-subheader class="md-no-sticky">Gambler's Fever Dream</md-subheader>
                        <md-list-item class="md-2-line" ng-repeat="cookie_list in cookies">
                            <img ng-src="{{displayCookies[$index][2].backfire?'img/WrathCookie.png':'img/GoldCookie.png'}}"
                                 class="md-avatar" alt="Golden Cookie"/>
                            <div class="md-list-item-text{{(displayCookies[$index][2].hasBs || displayCookies[$index][2].hasEf) ? ' highlightCombo' : displayCookies[$index][2].type == 'Resurrect Abomination' || (displayCookies[$index][2].type == 'Spontaneous Edifice' && !displayCookies[$index][2].backfire) ? ' highlightSkip' : ''}}"
                                 layout="column">
                                <h3 title="{{displayCookies[$index][2].innerCookie1.type + '; ' + displayCookies[$index][2].innerCookie2.type}}">
                                    {{displayCookies[$index][2] ? displayCookies[$index][2].type : "Blank"}}</h3>
                            </div>
                        </md-list-item>
                    </md-list>
                </md-content>
            </div>
        </div>
        <md-button class="md-raised md-primary" ng-click="load_more()">Load More</md-button>
    </div>
</div>
</body>
</html>
